<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gnet.app.customerGroup.CustomerGroupMapper" >
    <resultMap id="BaseCustomerGroupMapper" type="com.gnet.app.customerGroup.CustomerGroup" >
        <id column="id" property="id" jdbcType="VARCHAR" />
        <result column="create_date" property="createDate" jdbcType="TIMESTAMP" />
        <result column="modify_date" property="modifyDate" jdbcType="TIMESTAMP"/>
        <result column="remark" property="remark" jdbcType="VARCHAR"/>
        <result column="customer_id" property="customerId" jdbcType="VARCHAR"/>
        <result column="groupbuy_id" property="groupbuyId" jdbcType="VARCHAR" />
        <result column="payment" property="payment" jdbcType="DECIMAL"/>
        <result column="username" property="username" jdbcType="VARCHAR"/>
        <result column="mobile" property="mobile" jdbcType="VARCHAR" />
        <result column="groupname" property="groupname" jdbcType="VARCHAR"/>
        <result column="groupprice" property="groupprice" jdbcType="VARCHAR" />
        <result column="address" property="address" jdbcType="VARCHAR" />
    </resultMap>
<!--
private BigDecimal payment;

    private String groupbuyId;

    private String customerId;

    private String remark;

    /** ====================表外置参数========================== **/

    private @Transient String username;
    private @Transient String mobile;
    private @Transient String groupname;
    private @Transient String groupprice;

-->

    
    <select id="selectPageAll" resultMap="BaseCustomerGroupMapper">
        select yc.* ,cus.`name` as username, cus.phone as mobile, yg.`name` as groupname,
        yg.group_price as groupprice, cus.address as address
        from ykj_customer_groupbuy yc
        left JOIN ykj_customer cus
        ON yc.customer_id = cus.id
        left JOIN `ykj_groupbuy` yg
        ON yc.groupbuy_id = yg.id
		<where>
			<if test=" name != null and name != ''">
                and name like CONCAT('%',CONCAT(#{name},'%'))
            </if>
            <if test=" phone != null and phone != ''">
                and remark like CONCAT('%',CONCAT(#{phone},'%'))
            </if>
		</where>
	</select>

    <select id="selectOneById" resultMap="BaseCustomerGroupMapper">
        select yc.* ,cus.`name` as username, cus.phone as mobile, yg.`name` as groupname,
        yg.group_price as groupprice,  cus.address as address
        from ykj_customer_groupbuy yc
        left JOIN ykj_customer cus
        ON yc.customer_id = cus.id
        left JOIN `ykj_groupbuy` yg
        ON yc.groupbuy_id = yg.id
               where yc.id =  #{id}
    </select>
</mapper>